{"version":3,"sources":["../../server/middleware/auth.js"],"names":["config","require","jwt","auth","req","res","next","token","header","status","json","msg","decoded","verify","get","user","e","module","exports"],"mappings":";;AAAA,IAAMA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAtB;;AACA,IAAMC,GAAG,GAAGD,OAAO,CAAC,cAAD,CAAnB;;AAEA,SAASE,IAAT,CAAcC,GAAd,EAAmBC,GAAnB,EAAwBC,IAAxB,EAA8B;AAC5B,MAAMC,KAAK,GAAGH,GAAG,CAACI,MAAJ,CAAW,cAAX,CAAd;AAEA,MAAG,CAACD,KAAJ,EAAW,OAAOF,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,IAAAA,GAAG,EAAE;AAAP,GAArB,CAAP;;AAEX,MAAI;AACF;AACA,QAAMC,OAAO,GAAGV,GAAG,CAACW,MAAJ,CAAWN,KAAX,EAAkBP,MAAM,CAACc,GAAP,CAAW,WAAX,CAAlB,CAAhB,CAFE,CAIF;;AACAV,IAAAA,GAAG,CAACW,IAAJ,GAAWH,OAAX;AACAN,IAAAA,IAAI;AACL,GAPD,CAOE,OAAMU,CAAN,EAAS;AACTX,IAAAA,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,GAAG,EAAE;AAAP,KAArB;AACD;AACF;;AAEDM,MAAM,CAACC,OAAP,GAAiBf,IAAjB","sourcesContent":["const config = require('config');\r\nconst jwt = require('jsonwebtoken');\r\n\r\nfunction auth(req, res, next) {\r\n  const token = req.header('x-auth-token');\r\n\r\n  if(!token) return res.status(401).json({ msg: 'No token, authorisation denied'});\r\n\r\n  try {\r\n    // Verify token\r\n    const decoded = jwt.verify(token, config.get('jwtSecret'));\r\n\r\n    // Add user from payload\r\n    req.user = decoded;\r\n    next();\r\n  } catch(e) {\r\n    res.status(400).json({ msg: 'Token is not valid'});\r\n  }\r\n}\r\n\r\nmodule.exports = auth;"],"file":"auth.js"}